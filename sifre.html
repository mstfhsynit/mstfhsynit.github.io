<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>≈ûifre Kasasƒ±</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
margin:0;
font-family:system-ui,Arial;
background:#020617;
color:#e5e7eb;
min-height:100vh;
display:flex;
align-items:center;
justify-content:center
}
.card{
width:100%;
max-width:420px;
background:#020617;
border:1px solid #334155;
border-radius:14px;
padding:20px;
box-sizing:border-box
}
h2{margin-top:0}
input,button{
width:100%;
padding:12px;
margin-top:10px;
border-radius:10px;
border:none;
box-sizing:border-box
}
input{
background:#020617;
color:#fff;
border:1px solid #334155
}
button{
background:#2563eb;
color:white;
cursor:pointer
}
button.secondary{
background:#020617;
border:1px solid #334155
}
.item{
border:1px solid #334155;
border-radius:10px;
padding:10px;
margin-top:10px
}
small{color:#94a3b8}
</style>
</head>

<body>

<div class="card" id="app"></div>

<script>
const app = document.getElementById("app");

/* ---------- INIT ---------- */
if(!localStorage.getItem("vault")){
localStorage.setItem("vault","[]");
}

render();

/* ---------- RENDER ---------- */
function render(){
if(!localStorage.getItem("user")){
renderRegister();
}else if(!sessionStorage.getItem("login")){
renderLogin();
}else{
renderVault();
}
}

/* ---------- REGISTER ---------- */
function renderRegister(){
app.innerHTML=`
<h2>üîê Hesap Olu≈ütur</h2>
<input id="ru" placeholder="Kullanƒ±cƒ± adƒ±">
<input id="rp1" type="password" placeholder="≈ûifre">
<input id="rp2" type="password" placeholder="≈ûifre tekrar">
<button onclick="register()">Olu≈ütur</button>
`;
}

function register(){
const u=document.getElementById("ru").value.trim();
const p1=document.getElementById("rp1").value;
const p2=document.getElementById("rp2").value;

if(!u||!p1||!p2) return alert("T√ºm alanlarƒ± doldurun");
if(p1!==p2) return alert("≈ûifreler uyu≈ümuyor");

localStorage.setItem("user",u);
localStorage.setItem("pass",p1);
sessionStorage.setItem("login","1");
render();
}

/* ---------- LOGIN ---------- */
function renderLogin(){
app.innerHTML=`
<h2>üîë Giri≈ü Yap</h2>
<input id="lu" placeholder="Kullanƒ±cƒ± adƒ±">
<input id="lp" type="password" placeholder="≈ûifre">
<button onclick="login()">Giri≈ü</button>
`;
}

function login(){
const u=document.getElementById("lu").value.trim();
const p=document.getElementById("lp").value;

if(
u===localStorage.getItem("user") &&
p===localStorage.getItem("pass")
){
sessionStorage.setItem("login","1");
render();
}else{
alert("Hatalƒ± giri≈ü");
}
}

/* ---------- VAULT ---------- */
function renderVault(){
const vault=JSON.parse(localStorage.getItem("vault"));
app.innerHTML=`
<h2>üîê ≈ûifre Kasasƒ±</h2>

<input id="search" placeholder="Ara..." oninput="renderVault()">

<input id="name" placeholder="≈ûifre adƒ±">
<input id="pass" placeholder="≈ûifre">
<button onclick="add()">Kaydet</button>

<button class="secondary" onclick="logout()">√áƒ±kƒ±≈ü</button>

<div id="list"></div>
`;

const q=document.getElementById("search").value.toLowerCase();
const list=document.getElementById("list");
list.innerHTML="";

vault.forEach((v,i)=>{
if(!v.name.toLowerCase().includes(q)) return;
list.innerHTML+=`
<div class="item">
<b>${v.name}</b><br>
<input id="p${i}" type="password" value="${v.pass}" readonly>
<button onclick="toggle(${i})">üëÅÔ∏è</button><br>
<small>Olu≈üturma: ${v.created}</small><br>
<small>Son kullanƒ±m: ${v.last||"-"}</small>
</div>`;
});
}

function add(){
const name=document.getElementById("name").value.trim();
const pass=document.getElementById("pass").value;

if(!name||!pass) return alert("Bo≈ü alan var");

const vault=JSON.parse(localStorage.getItem("vault"));
vault.push({
name,
pass,
created:new Date().toLocaleString(),
last:null
});
localStorage.setItem("vault",JSON.stringify(vault));
renderVault();
}

function toggle(i){
const el=document.getElementById("p"+i);
el.type=el.type==="password"?"text":"password";

const vault=JSON.parse(localStorage.getItem("vault"));
vault[i].last=new Date().toLocaleString();
localStorage.setItem("vault",JSON.stringify(vault));
}

function logout(){
sessionStorage.clear();
render();
}
</script>

</body>
</html>
