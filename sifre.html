<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>Cihaza Ã–zel Åifre KasasÄ±</title>
  <script src="https://unpkg.com/mammoth/mammoth.browser.min.js"></script>
  <style>
    body{margin:0;min-height:100vh;font-family:Arial;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;justify-content:center;align-items:center;color:#fff}
    .card{background:rgba(255,255,255,.15);backdrop-filter:blur(10px);padding:20px;border-radius:16px;width:380px;box-shadow:0 20px 40px rgba(0,0,0,.3);animation:fadeIn .8s}
    h2,h3{text-align:center}
    input,button{width:100%;margin:8px 0;padding:10px;border-radius:10px;border:none;outline:none}
    button{background:#4caf50;color:#fff;font-weight:bold;cursor:pointer}
    .hidden{display:none}
    .item{background:rgba(0,0,0,.25);padding:10px;border-radius:10px;margin-top:10px;font-size:14px;animation:slideUp .5s}
    .row{display:flex;gap:6px}
    .row button{flex:1}
    @keyframes fadeIn{from{opacity:0;transform:scale(.9)}to{opacity:1}}
    @keyframes slideUp{from{opacity:0;transform:translateY(15px)}to{opacity:1}}
  </style>
</head>
<body>
<div class="card">
<h2>ğŸ” Åifre KasasÄ±</h2>

<div id="registerBox">
<h3>Hesap OluÅŸtur</h3>
<input id="regUser" placeholder="KullanÄ±cÄ± adÄ±">
<input id="regPass" type="password" placeholder="Ana ÅŸifre">
<button onclick="createAccount()">OluÅŸtur</button>
</div>

<div id="loginBox" class="hidden">
<h3>GiriÅŸ Yap</h3>
<input id="logUser" placeholder="KullanÄ±cÄ± adÄ±">
<input id="logPass" type="password" placeholder="Ana ÅŸifre">
<button onclick="loginAccount()">GiriÅŸ</button>
</div>

<div id="panel" class="hidden">
<h3>Åifre Ekle</h3>
<input id="title" placeholder="Åifre adÄ±">
<div class="row">
<input id="password" type="password" placeholder="Åifre">
<button onclick="togglePassword()">ğŸ‘</button>
</div>
<button onclick="savePassword()">Kaydet</button>

<input type="file" accept=".docx" onchange="importDocx(this)">

<div id="list"></div>
<button style="background:#e53935" onclick="logout()">Ã‡Ä±kÄ±ÅŸ</button>
</div>
</div>

<script>
const registerBox=document.getElementById('registerBox')
const loginBox=document.getElementById('loginBox')
const panel=document.getElementById('panel')
const list=document.getElementById('list')
const key='vault'

function deviceId(){return btoa(navigator.userAgent+screen.width+screen.height)}

function createAccount(){
  if(!regUser.value||!regPass.value){alert('Bilgiler eksik');return}
  const data={user:regUser.value,pass:regPass.value,device:deviceId(),vault:[]}
  localStorage.setItem(key,JSON.stringify(data))
  registerBox.classList.add('hidden')
  loginBox.classList.remove('hidden')
}

function loginAccount(){
  const d=JSON.parse(localStorage.getItem(key))
  if(!d)return alert('Hesap yok')
  if(d.device!==deviceId())return alert('Bu cihazda kullanÄ±lamaz')
  if(logUser.value===d.user&&logPass.value===d.pass){
    loginBox.classList.add('hidden')
    panel.classList.remove('hidden')
    render()
  }else alert('HatalÄ± giriÅŸ')
}

function savePassword(){
  if(!title.value||!password.value)return alert('BoÅŸ alan var')
  const d=JSON.parse(localStorage.getItem(key))
  const n=new Date()
  d.vault.push({title:title.value,password:password.value,created:`${n.getFullYear()}-${n.getMonth()+1}-${n.getDate()} ${n.getHours()}:${String(n.getMinutes()).padStart(2,'0')}`})
  localStorage.setItem(key,JSON.stringify(d))
  title.value=password.value=''
  render()
}

function render(){
  const d=JSON.parse(localStorage.getItem(key))
  list.innerHTML=''
  d.vault.forEach(v=>{
    list.innerHTML+=`<div class="item"><b>${v.title}</b><br>Åifre: ${v.password}<br><small>${v.created}</small></div>`
  })
}

function togglePassword(){password.type=password.type==='password'?'text':'password'}
function logout(){location.reload()}

function importDocx(input){
  const reader=new FileReader()
  reader.onload=e=>{
    mammoth.extractRawText({arrayBuffer:e.target.result}).then(r=>{
      const lines=r.value.split('\n').filter(x=>x.includes(':'))
      const d=JSON.parse(localStorage.getItem(key))
      lines.forEach(l=>{
        const [t,p]=l.split(':')
        const n=new Date()
        d.vault.push({title:t.trim(),password:p.trim(),created:`${n.getFullYear()}-${n.getMonth()+1}-${n.getDate()} ${n.getHours()}:${String(n.getMinutes()).padStart(2,'0')}`})
      })
      localStorage.setItem(key,JSON.stringify(d))
      render()
    })
  }
  reader.readAsArrayBuffer(input.files[0])
}

if(localStorage.getItem(key)){
  registerBox.classList.add('hidden')
  loginBox.classList.remove('hidden')
}
</script>
</body>
</html>
