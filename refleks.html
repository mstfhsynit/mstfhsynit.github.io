<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Kutu Yakala Oyunu</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  height: 100vh;
  background: linear-gradient(135deg, #141e30, #243b55);
  display: flex;
  justify-content: center;
  align-items: center;
  font-family: Arial, sans-serif;
  color: white;
}

.game {
  width: 360px;
  height: 560px;
  background: rgba(0,0,0,0.4);
  border-radius: 18px;
  padding: 15px;
  box-shadow: 0 20px 40px rgba(0,0,0,0.5);
  position: relative;
  overflow: hidden;
}

header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 14px;
}

select, button {
  border-radius: 8px;
  border: none;
  padding: 6px 10px;
}

button {
  background: #00e676;
  cursor: pointer;
}

#area {
  position: relative;
  width: 100%;
  height: 420px;
  margin-top: 10px;
  background: rgba(255,255,255,0.05);
  border-radius: 12px;
  overflow: hidden;
}

.box {
  width: 50px;
  height: 50px;
  position: absolute;
  bottom: -60px;
  border-radius: 12px;
  cursor: pointer;
}

.info {
  display: flex;
  justify-content: space-between;
  margin-top: 6px;
  font-size: 14px;
}
</style>
</head>

<body>

<div class="game">
  <header>
    <div>üéØ <span id="score">0</span></div>

    <select id="difficulty">
      <option value="easy">Kolay</option>
      <option value="medium">Orta</option>
      <option value="hard">Zor</option>
    </select>

    <button onclick="startGame()">Ba≈üla</button>
  </header>

  <div id="area"></div>

  <div class="info">
    <div>‚ù§Ô∏è <span id="lives">3</span></div>
    <div>üî• Combo: <span id="combo">0</span></div>
    <div>‚è±Ô∏è <span id="time">60</span>s</div>
  </div>

  <div class="info">
    üèÜ En iyi skor: <span id="best">0</span>
  </div>
</div>

<!-- SESLER -->
<audio id="hit" src="https://actions.google.com/sounds/v1/cartoon/pop.ogg"></audio>
<audio id="miss" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"></audio>

<script>
let score = 0;
let lives = 3;
let combo = 0;
let time = 60;
let speed = 2;
let gameInterval, timerInterval;

const area = document.getElementById("area");
const scoreText = document.getElementById("score");
const livesText = document.getElementById("lives");
const comboText = document.getElementById("combo");
const timeText = document.getElementById("time");
const bestText = document.getElementById("best");

const hitSound = document.getElementById("hit");
const missSound = document.getElementById("miss");

let bestScore = localStorage.getItem("bestScore") || 0;
bestText.innerText = bestScore;

function startGame() {
  score = 0;
  lives = 3;
  combo = 0;
  time = 60;

  area.innerHTML = "";
  scoreText.innerText = score;
  livesText.innerText = lives;
  comboText.innerText = combo;
  timeText.innerText = time;

  clearInterval(gameInterval);
  clearInterval(timerInterval);

  const diff = document.getElementById("difficulty").value;
  speed = diff === "easy" ? 2 : diff === "medium" ? 4 : 6;

  gameInterval = setInterval(createBox, 800);
  timerInterval = setInterval(updateTime, 1000);
}

function updateTime() {
  time--;
  timeText.innerText = time;

  if (time <= 0 || lives <= 0) endGame();
}

function endGame() {
  clearInterval(gameInterval);
  clearInterval(timerInterval);

  if (score > bestScore) {
    bestScore = score;
    localStorage.setItem("bestScore", bestScore);
    bestText.innerText = bestScore;
  }

  alert("Oyun bitti! Skor: " + score);
}

function createBox() {
  if (lives <= 0) return;

  const box = document.createElement("div");
  box.className = "box";
  box.style.left = Math.random() * (area.clientWidth - 50) + "px";
  box.style.background = randomColor();
  area.appendChild(box);

  let bottom = -60;

  const move = setInterval(() => {
    bottom += speed;
    box.style.bottom = bottom + "px";

    if (bottom > area.clientHeight) {
      clearInterval(move);
      box.remove();
      lives--;
      combo = 0;
      livesText.innerText = lives;
      comboText.innerText = combo;
      missSound.play();
    }
  }, 20);

  box.onclick = () => {
    clearInterval(move);
    box.remove();
    hitSound.play();

    combo++;
    score += 1 + Math.floor(combo / 3);

    scoreText.innerText = score;
    comboText.innerText = combo;
  };
}

function randomColor() {
  const colors = ["#ff5252", "#40c4ff", "#69f0ae", "#ffd740", "#b388ff"];
  return colors[Math.floor(Math.random() * colors.length)];
}
</script>

</body>
</html>
