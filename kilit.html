<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>MSTFHSYN Zihin Kilidi</title>
<style>
body{
    background:#0f1220;
    color:#fff;
    font-family:Arial, sans-serif;
    text-align:center;
    margin:0;
}
.kutu{margin-top:60px}
.ipucu{font-size:20px;margin-bottom:10px}
.sure{font-size:22px;margin:10px 0}
input{
    font-size:20px;
    padding:8px;
    width:130px;
    text-align:center;
}
button{
    font-size:18px;
    padding:8px 16px;
    margin-left:5px;
}
.mesaj{margin-top:15px;font-size:20px;min-height:26px}
.kilit{
    width:80px;
    height:80px;
    border:4px solid #fff;
    border-radius:10px;
    margin:20px auto;
    transition:0.3s;
}
.acik{border-color:#0f0; transform:rotate(10deg)}
.kilitli{border-color:#f00; animation:salla 0.4s}
@keyframes salla{
    0%{transform:translateX(0)}
    25%{transform:translateX(-5px)}
    50%{transform:translateX(5px)}
    75%{transform:translateX(-5px)}
    100%{transform:translateX(0)}
}
.skor{margin-top:10px;font-size:18px}
</style>
</head>
<body>

<div class="kutu">
    <h1>MSTFHSYN Zihin Kilidi</h1>

    <div class="kilit" id="kilit"></div>

    <div class="ipucu" id="ipucu"></div>
    <div class="sure">‚è±Ô∏è <span id="sure">30</span> sn</div>

    <input id="cevap" placeholder="≈ûifre">
    <button onclick="kontrolEt()">A√ß</button>

    <div class="mesaj" id="mesaj"></div>
    <div class="skor">üèÜ Skor: <span id="skor">0</span></div>
</div>

<script>
/* ========= SES (DOSYASIZ) ========= */
const audioCtx=new (window.AudioContext||window.webkitAudioContext)();
document.body.addEventListener("click",()=>{
 if(audioCtx.state==="suspended") audioCtx.resume();
},{once:true});

function ses(f,s=0.2,t="sine"){
 const o=audioCtx.createOscillator(),g=audioCtx.createGain();
 o.type=t;o.frequency.value=f;o.connect(g);g.connect(audioCtx.destination);
 g.gain.setValueAtTime(0.25,audioCtx.currentTime);
 g.gain.exponentialRampToValueAtTime(0.001,audioCtx.currentTime+s);
 o.start();o.stop(audioCtx.currentTime+s);
}
const sesDogru=()=>{ses(600,.15);setTimeout(()=>ses(900,.15),150);}
const sesYanlis=()=>ses(160,.3,"square");
const sesSure=()=>ses(300,.4,"triangle");
const sesKilit=()=>ses(90,.6,"sawtooth");

/* ========= Tƒ∞TRE≈ûƒ∞M ========= */
const vib=p=>{ if(navigator.vibrate) navigator.vibrate(p); };

/* ========= OYUN VERƒ∞Sƒ∞ ========= */
const sorular=[
 {ipucu:"ƒ∞lk iki rakam aynƒ±dƒ±r",cevap:"4454",sure:30},
 {ipucu:"Son iki rakamƒ±n toplamƒ± 9",cevap:"3396",sure:25},
 {ipucu:"ƒ∞lk iki rakam aynƒ±, toplam 17",cevap:"4454",sure:20}
];

let i=0, sure=30, timer, cevapVerildi=false;
let yanlisHak=0, skor=0;

/* ========= ELEMANLAR ========= */
const ipucu=document.getElementById("ipucu");
const sureEl=document.getElementById("sure");
const cevap=document.getElementById("cevap");
const mesaj=document.getElementById("mesaj");
const kilit=document.getElementById("kilit");
const skorEl=document.getElementById("skor");

/* ========= OYUN ========= */
function yukle(){
 if(i>=sorular.length){
  document.body.innerHTML="<h1>üéâ Oyun Bitti</h1><h2>Skor: "+skor+"</h2>";
  return;
 }
 cevapVerildi=false;
 yanlisHak=0;
 kilit.className="kilit";
 sure=sorular[i].sure;
 ipucu.innerText=sorular[i].ipucu;
 sureEl.innerText=sure;
 cevap.value=""; mesaj.innerText="";
 timer=setInterval(()=>{
  sure--; sureEl.innerText=sure;
  if(sure<=0){
   clearInterval(timer);
   if(!cevapVerildi){
    sesSure(); vib(600);
    mesaj.innerText="‚è∞ S√ºre doldu!";
    setTimeout(()=>{ i++; yukle(); },1500);
   }
  }
 },1000);
}

function kontrolEt(){
 if(cevapVerildi) return;

 if(cevap.value===sorular[i].cevap){
  cevapVerildi=true;
  clearInterval(timer);
  kilit.classList.add("acik");
  sesDogru(); vib(120);
  skor+=10; skorEl.innerText=skor;
  mesaj.innerText="üîì Kilit a√ßƒ±ldƒ±!";
  setTimeout(()=>{ i++; yukle(); },1200);
 }else{
  yanlisHak++;
  kilit.classList.add("kilitli");
  setTimeout(()=>kilit.classList.remove("kilitli"),400);
  sesYanlis(); vib([80,80]);
  mesaj.innerText="‚ùå Yanlƒ±≈ü ("+yanlisHak+"/3)";
  if(yanlisHak>=3){
    clearInterval(timer);
    sesKilit(); vib(700);
    skor-=5; skorEl.innerText=skor;
    mesaj.innerText="üîí Kilit kalƒ±cƒ± olarak kapandƒ±!";
    setTimeout(()=>{ i++; yukle(); },1500);
  }
 }
}

yukle();
</script>
</body>
</html>
