<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Åifre YÃ¶neticisi</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box}
body{
  margin:0;font-family:system-ui,sans-serif;min-height:100vh;
  background:
    radial-gradient(circle at top left,#2563eb,transparent 40%),
    radial-gradient(circle at bottom right,#9333ea,transparent 40%),
    #020617;
  display:flex;justify-content:center;align-items:center;color:#e5e7eb
}
.card{
  width:100%;max-width:540px;margin:16px;
  background:rgba(2,6,23,.9);backdrop-filter:blur(14px);
  border-radius:18px;padding:20px
}
input,button{
  width:100%;padding:10px;margin-top:8px;
  border-radius:10px;border:none;font-size:15px
}
input{background:#020617;color:#e5e7eb}
button{background:#2563eb;color:white;cursor:pointer}
.secondary{background:#334155}
.danger{background:#dc2626}
.row{display:flex;gap:8px}
.bar{height:10px;background:#020617;border-radius:999px;overflow:hidden}
.fill{height:100%;width:0%;transition:.4s}
hr{border:none;height:1px;background:#1e293b;margin:16px 0}

.item{
  background:#020617;border:1px solid #1e293b;
  border-radius:10px;margin-top:10px;overflow:hidden
}
.header{padding:10px;cursor:pointer}
.header:hover{background:#020617aa}
.time{font-size:12px;opacity:.6}
.content{
  max-height:0;overflow:hidden;
  transition:max-height .3s ease;
  padding:0 10px
}
.item.open .content{
  max-height:220px;
  padding-bottom:10px
}
.actions{display:flex;gap:6px;margin-top:6px}
.actions button{flex:1;font-size:13px;padding:6px}
.hidden{display:none}
</style>
</head>

<body>

<!-- MASTER PASSWORD -->
<div class="card" id="lock">
  <h2>ğŸ” Master Password</h2>
  <input type="password" id="master" placeholder="Master ÅŸifre">
  <button onclick="unlock()">GiriÅŸ</button>
  <p id="lockMsg" style="color:#f87171"></p>
</div>

<!-- APP -->
<div class="card hidden" id="app">

<h2>ğŸ” Åifre YÃ¶neticisi</h2>

<input type="password" id="pw" placeholder="Åifre yaz veya oluÅŸtur">
<div class="bar"><div id="fill" class="fill"></div></div>
<div id="strength"></div>

<div class="row">
  <button class="secondary" onclick="toggleMain()">ğŸ‘ï¸</button>
  <button onclick="generate()">ğŸ² OluÅŸtur</button>
</div>

<hr>

<input id="label" placeholder="Åifreye bir ad ver">
<button onclick="save()">ğŸ’¾ Kaydet</button>

<hr>

<h3>ğŸ” Ara</h3>
<input id="search" placeholder="Etikete gÃ¶re ara..." oninput="load()">

<hr>

<div class="row">
  <button class="secondary" onclick="exportData()">ğŸ“¤ Export</button>
  <input type="file" id="importFile" hidden>
  <button class="secondary" onclick="importClick()">ğŸ“¥ Import</button>
</div>

<hr>

<h3>ğŸ“‚ Kaydedilen Åifreler</h3>
<div id="list"></div>

</div>

<script>
/* ===== MASTER PASSWORD ===== */
const lock=document.getElementById("lock");
const app=document.getElementById("app");
const lockMsg=document.getElementById("lockMsg");

function hash(s){
  return crypto.subtle.digest("SHA-256",new TextEncoder().encode(s))
    .then(b=>[...new Uint8Array(b)].map(x=>x.toString(16).padStart(2,"0")).join(""));
}

async function unlock(){
  const m=document.getElementById("master").value;
  if(!m)return;
  const h=await hash(m);
  const saved=localStorage.getItem("master");
  if(!saved){
    localStorage.setItem("master",h);
    open();
  }else if(saved===h){
    open();
  }else{
    lockMsg.textContent="HatalÄ± master password";
  }
}
function open(){
  lock.classList.add("hidden");
  app.classList.remove("hidden");
  load();
}

/* ===== MAIN ===== */
const pw=document.getElementById("pw");
const fill=document.getElementById("fill");
const strength=document.getElementById("strength");
const list=document.getElementById("list");
const search=document.getElementById("search");

pw.oninput=()=>{
  let p=pw.value,s=0;
  if(p.length>=12)s+=30;
  if(/[A-Z]/.test(p))s+=15;
  if(/[a-z]/.test(p))s+=15;
  if(/\d/.test(p))s+=20;
  if(/[^A-Za-z0-9]/.test(p))s+=20;
  fill.style.width=s+"%";
  fill.style.background=s<40?"#ef4444":s<70?"#f59e0b":"#22c55e";
  strength.textContent=s<40?"ZayÄ±f":s<70?"Orta":"GÃ¼Ã§lÃ¼";
};

function toggleMain(){
  pw.type=pw.type==="password"?"text":"password";
}

function generate(){
  const chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()";
  let out="";
  crypto.getRandomValues(new Uint32Array(12)).forEach(n=>out+=chars[n%chars.length]);
  pw.value=out;pw.oninput();
}

function now(){
  const d=new Date(),p=n=>String(n).padStart(2,"0");
  return `${d.getFullYear()}-${p(d.getMonth()+1)}-${p(d.getDate())} ${p(d.getHours())}:${p(d.getMinutes())}:${p(d.getSeconds())}`;
}

function save(){
  if(!label.value||!pw.value)return;
  let v=JSON.parse(localStorage.getItem("vault")||"[]");
  v.push({label:label.value,password:pw.value,created:now(),lastUsed:null});
  localStorage.setItem("vault",JSON.stringify(v));
  label.value="";pw.value="";
  load();
}

function touch(i){
  let v=JSON.parse(localStorage.getItem("vault"));
  v[i].lastUsed=now();
  localStorage.setItem("vault",JSON.stringify(v));
}

function load(){
  list.innerHTML="";
  let v=JSON.parse(localStorage.getItem("vault")||"[]");
  v.forEach((x,i)=>{
    if(!x.label.toLowerCase().includes(search.value.toLowerCase()))return;
    const div=document.createElement("div");
    div.className="item";
    div.innerHTML=`
      <div class="header" onclick="this.parentNode.classList.toggle('open')">
        <b>${x.label}</b>
        <div class="time">ğŸ“… ${x.created}</div>
        <div class="time">ğŸ•’ ${x.lastUsed||"-"}</div>
      </div>
      <div class="content">
        <input type="password" readonly id="p${i}" value="${x.password}">
        <div class="actions">
          <button onclick="show(${i})">ğŸ‘ï¸</button>
          <button onclick="copyPw(${i})">ğŸ“‹</button>
          <button class="danger" onclick="del(${i})">ğŸ—‘ï¸</button>
        </div>
      </div>`;
    list.appendChild(div);
  });
}

function show(i){
  const el=document.getElementById("p"+i);
  el.type=el.type==="password"?"text":"password";
  touch(i);
}

function copyPw(i){
  navigator.clipboard.writeText(document.getElementById("p"+i).value);
  touch(i);
}

function del(i){
  let v=JSON.parse(localStorage.getItem("vault"));
  v.splice(i,1);
  localStorage.setItem("vault",JSON.stringify(v));
  load();
}

/* ===== EXPORT / IMPORT ===== */
function exportData(){
  const data=localStorage.getItem("vault")||"[]";
  const blob=new Blob([data],{type:"application/json"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download="passwords_backup_"+Date.now()+".json";
  a.click();
}

function importClick(){
  document.getElementById("importFile").click();
}

document.getElementById("importFile").onchange=e=>{
  const file=e.target.files[0];
  if(!file)return;
  const r=new FileReader();
  r.onload=()=>{
    localStorage.setItem("vault",r.result);
    load();
  };
  r.readAsText(file);
};
</script>
</body>
</html>
